using System.Collections.Generic;
using UnityEngine;


public static class Helpers {

    public static bool ContainsTwice<T>(this IEnumerable<T> enumerable, T item) {
        var alreadySeen = false;
        foreach (var i in enumerable) {
            if (i?.Equals(item) is not true) continue;
            if (alreadySeen) return true;
            alreadySeen = true;
        }
        return false;
    }

    public static Vector3 Average(IEnumerable<Vector3> vectors) {
        var sum = Vector3.zero;
        var count = 0;
        foreach (var v in vectors) {
            sum += v;
            count++;
        }
        return count != 0 ? sum / count : Vector3.zero;
    }// copilot


    public static List<List<char>> GroupVectorsByAngle(Dictionary<char, Vector3> directions) {
        var clusters = new List<List<char>>();

        foreach (var (key, vector) in directions) {
            bool addedToCluster = false;

            foreach (var cluster in clusters) {
                if (Vector3.Angle(directions[cluster[0]], vector) is >= 2f and <= 88f) continue;
                cluster.Add(key);
                addedToCluster = true;
                break;
            }

            if (!addedToCluster) clusters.Add(new() { key });
            // how nice would a for else like in python be here
        }

        return clusters;
    }//ChatGPT

    // these come from optimizing sum(dot(v, w)² / (|v|² * |w|²)) for v, w in vectors
    public static readonly Vector3[][] distributedVectors = new[] {
        new Vector3[] {
        },
        new Vector3[] {
            new(1f, 0f, 0f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(1.3187644030519204E-10f, 0.9704606172806666f, 0.24125959111966389f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(-7.541929690220346E-11f, -0.8244135951653061f, 0.5659878303520447f),
            new(9.584846407388521E-11f, 0.5659878468177633f, 0.8244135838610329f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(0.3333468459537009f, 0.8627577159089795f, 0.3801697041220412f),
            new(-0.333332443526335f, 0.10216104530657774f, 0.9372580236597764f),
            new(0.3333251659770793f, -0.7606234500919576f, 0.5570873368660968f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(-0.030639115588868362f, 0.9980345911558861f, 0.054664425838337215f),
            new(0.5700220230647032f, 0.34903708213282175f, 0.7438064321565314f),
            new(-0.5822121782410838f, 0.23779593595091f, 0.7774844515184873f),
            new(0.04266165499071641f, -0.7015791125168226f, 0.7113133852765323f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(0.21816427438256653f, -0.7475430090993216f, 0.6273625737401458f),
            new(-0.7705872330692173f, 0.11497109729662094f, 0.6268787466624934f),
            new(-0.027867855233477113f, -0.8996459347281892f, 0.43572993329782683f),
            new(0.5956574903339318f, 0.4407040980783368f, 0.6715445272995989f),
            new(-0.055077317787828706f, 0.6514547057787834f, 0.7566857044929404f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(0.02990887689249664f, -0.9728255397805737f, 0.2295994952818159f),
            new(-0.3099514444250232f, -0.4569918743611588f, 0.8337196944217624f),
            new(0.10038474182303533f, 0.8312550122807144f, 0.5467522365453222f),
            new(0.5726709708938136f, -0.44417038427124866f, 0.6890287576232709f),
            new(-0.9335606427657569f, 0.03170307611059922f, 0.35701462329141687f),
            new(0.16366032940417977f, 0.5374411373542637f, 0.8272679858780169f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(-0.4866671239670067f, 0.803068186409684f, 0.3438554906153793f),
            new(0.6080497367240586f, 0.019960975705273686f, 0.7936479554051007f),
            new(-0.4292557709843283f, 0.01612473037740318f, 0.9030390224939928f),
            new(0.8760553865473115f, 0.267949929079647f, 0.4009112061387818f),
            new(-0.008456062637621465f, -0.9262327188707697f, 0.37685732777528697f),
            new(-0.3291210462613337f, -0.43960263454250803f, 0.8357205637120168f),
            new(-0.0017337180416581045f, 0.9476880314236636f, 0.31919334159423374f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(0.7734286659327333f, 0.3080608311348759f, 0.553991536969656f),
            new(-0.07457004005004718f, -0.8943165023399632f, 0.44117717843214527f),
            new(-0.5131276877797879f, 0.663646286167822f, 0.5443101899555308f),
            new(-0.12534520203057575f, -0.905980058740986f, 0.4043373758281487f),
            new(-0.9174735779022692f, 0.09893675001976981f, 0.3852969677362309f),
            new(-0.16225440978313124f, -0.1259866472060082f, 0.9786730154815327f),
            new(0.04014724261496505f, 0.9003770260495945f, 0.43325444010708425f),
            new(0.4975076771178394f, -0.08797481491655755f, 0.8629869889802564f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(0.14326364508644215f, -0.37214656301388316f, 0.9170509602162247f),
            new(0.38610528287805346f, 0.8727498603325484f, 0.2987145658035029f),
            new(-0.008409868715859635f, -0.43477669114189965f, 0.9004990299538824f),
            new(-0.18642472784449868f, 0.9695327777726684f, 0.15890882188386551f),
            new(0.773086999821134f, -0.132211716209488f, 0.6203680784860709f),
            new(-0.9774600007018478f, -0.046825441014202114f, 0.20586239360740263f),
            new(0.009259737132043285f, 0.5440085033672242f, 0.8390286082919928f),
            new(-0.718488462420673f, -0.24982981122489564f, 0.6491220184154212f),
            new(-0.24387364306283107f, 0.9623637652691437f, 0.11992343188993382f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(0.14847594354995639f, -0.8310011027885638f, 0.5360896019800617f),
            new(0.1777306993812294f, 0.658223875949935f, 0.7315416103181716f),
            new(0.7159424963527493f, -0.4882187926120053f, 0.4990678836157157f),
            new(-0.7746057618421551f, 0.3746843515235244f, 0.5095071642718386f),
            new(0.27736385133294417f, 0.7799991690759208f, 0.5609550696933129f),
            new(-0.9522049394135582f, 0.1667414240942217f, 0.2559356380956999f),
            new(0.6792588987804077f, 0.7090518756556653f, 0.1893483193926231f),
            new(-0.20768403854485742f, -0.04229137092887358f, 0.9772813208481242f),
            new(0.019827172359551667f, -0.32245502335596f, 0.9463771136015134f),
            new(-0.10908579505622211f, -0.9588657793614656f, 0.26206240952582566f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(0.8956976925259074f, -0.0019775062023107393f, 0.44465912008299696f),
            new(-0.3352635876697027f, -0.6728523610393532f, 0.659445241871232f),
            new(0.01279137389131255f, 0.9135581122075589f, 0.4065070188492858f),
            new(-0.4609607564903731f, 0.7652887575756592f, 0.44927530368820295f),
            new(-0.05672627549486363f, 0.07931705964865442f, 0.9952341100048636f),
            new(0.2266528844639796f, 0.13517074374145638f, 0.9645503304652068f),
            new(-0.050416744735439833f, 0.8584540008814779f, 0.510406583246009f),
            new(-0.070049806904097f, -0.8294510802086305f, 0.5541695860415248f),
            new(-0.945002687120045f, 0.003899532903610679f, 0.32703931717612816f),
            new(0.9536585404337786f, 0.005890216081639645f, 0.30083333195014594f),
            new(-0.09037658885480752f, -0.8230856930692702f, 0.5606799568841822f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(-0.14917214115787236f, -0.6990743908229424f, 0.6993158573905698f),
            new(0.05924227842054733f, -0.8487557461191131f, 0.5254560265876964f),
            new(0.03783099675472285f, 0.8489045194989393f, 0.5271906035380556f),
            new(-0.04813613854860428f, -0.98336681761968f, 0.17513598765009003f),
            new(0.011258627871003367f, 0.0890134821399083f, 0.9959667882493827f),
            new(0.7991647638652024f, -0.28160504100011796f, 0.5310689984169636f),
            new(-0.6903643645320767f, 0.12970767976135933f, 0.7117393919091077f),
            new(0.6487018628994237f, 0.6403588718023557f, 0.41124981261373433f),
            new(-0.91688148416082f, 0.19615163892926155f, 0.3476390060801815f),
            new(-0.08782026245606465f, -0.01967664466287582f, 0.995941981822716f),
            new(0.9564630586173086f, 0.005669218108597575f, 0.2917983506918087f),
            new(-0.06649061784107238f, 0.9400173668909548f, 0.33458384253055085f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(0.6119442201261384f, -0.33162457442096627f, 0.7180176969228024f),
            new(-0.0498013140490856f, -0.11365461723106624f, 0.9922713626327448f),
            new(0.07621602581386905f, -0.5663320885748302f, 0.8206455281420905f),
            new(-0.8965613549609202f, 0.362306447443102f, 0.25477789333417034f),
            new(0.06486114596094092f, 0.9683022442784854f, 0.2412131743290201f),
            new(-0.0476303489836764f, 0.3672198046902994f, 0.9289138630136337f),
            new(-0.004494521598549555f, -0.8731418359422257f, 0.48744551859981206f),
            new(-0.14353474030384028f, 0.9794363255637178f, 0.14178244775765445f),
            new(-0.7873911073277097f, -0.4781977849762124f, 0.38902714885350514f),
            new(-0.9829831808272672f, 0.008306005831798044f, 0.1835077014128565f),
            new(-0.006942347073121739f, 0.9535921635105785f, 0.3010212442807489f),
            new(0.9260029265601307f, 0.28990241012661194f, 0.24181640267950205f),
            new(0.0960612888285496f, 0.2746642882604812f, 0.956729720215151f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(-0.11091404060470852f, 0.4432389275192445f, 0.8895152211897933f),
            new(-0.31990660948931554f, -0.5206381804065476f, 0.7915779470829196f),
            new(-0.27787143005670983f, -0.02173158464789518f, 0.9603724311885106f),
            new(0.5137066459152205f, 0.35363063901661906f, 0.781697417861433f),
            new(-0.04069796240334205f, -0.37677405036127415f, 0.9254107146724508f),
            new(-0.17036966588800506f, 0.9531282190794229f, 0.2500415464271827f),
            new(0.28267464133992637f, 0.9511841301038282f, 0.1238700842898217f),
            new(0.9341166299345306f, -0.34417062594393905f, 0.09472434701338697f),
            new(-0.45625255505464446f, 0.8811436530941217f, 0.12417515298180509f),
            new(-0.9768968415992678f, 0.11948869914505661f, 0.17718637546379506f),
            new(0.8427475107660907f, 0.39565559170366255f, 0.3650113503045934f),
            new(-0.053504422068875554f, 0.9960572084263037f, 0.07076237956057123f),
            new(-0.5667770091677685f, -0.5523519715179328f, 0.6112864479432633f),
            new(0.6035222103299851f, -0.2981423804191466f, 0.7395079868645192f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(0.28857359453952086f, 0.3574314601807835f, 0.8882387245597734f),
            new(0.8368399388090119f, -0.16608943830391867f, 0.5216447213362922f),
            new(0.027871920893908355f, 0.760473462862926f, 0.6487705821836819f),
            new(-0.606156109171268f, -0.05526330883967463f, 0.7934234292043817f),
            new(-0.358068805918344f, 0.015238244124575995f, 0.9335708468799843f),
            new(-0.6751462727365304f, 0.25289660972714895f, 0.6929796643470028f),
            new(-0.18797008301639453f, -0.12905268037364595f, 0.9736594135421212f),
            new(0.19548351243962453f, -0.9448360029552458f, 0.2628138578610762f),
            new(0.9374222471526801f, 0.05046506862817323f, 0.3445182250499581f),
            new(0.9185146579566807f, -0.0418568142946661f, 0.3931651436938724f),
            new(-0.04469243583207155f, 0.9794794019078343f, 0.1965265565201494f),
            new(0.43632161628581084f, 0.856416703542219f, 0.27599615405946654f),
            new(-0.05126358214717656f, -0.8787364011622533f, 0.4745465018497672f),
            new(0.5848897421716404f, -0.7706248746469574f, 0.2530638102885377f),
            new(-0.514220044788213f, -0.7482562676202188f, 0.41915427172470493f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(-0.14812297984787556f, -0.89397155354067f, 0.4229355084419688f),
            new(-0.12109539792419974f, -0.7277982786142312f, 0.6750152370485731f),
            new(-0.2330015991070539f, 0.8940460968354058f, 0.3826118549482384f),
            new(-0.3432587697720113f, 0.6438511951660078f, 0.6838340847441787f),
            new(0.2051272064495349f, 0.813346968239933f, 0.5444166955826384f),
            new(-0.7186498443882546f, -0.1819172427455778f, 0.6711546155339946f),
            new(0.3928860871833236f, -0.1984288781766013f, 0.8979234392771767f),
            new(0.2999199971005617f, -0.8986523483312324f, 0.3201124055358686f),
            new(0.2435511961364951f, 0.5367208760158035f, 0.8078449827221251f),
            new(-0.623454641376972f, 0.6575849271845743f, 0.4229496112838609f),
            new(-0.8822508113014887f, 0.03905917597589728f, 0.46915656952658f),
            new(-0.20481254775495802f, -0.7514798634655357f, 0.6271601351233534f),
            new(0.8456335341506099f, -0.0943541649620222f, 0.5253581801726026f),
            new(0.6548096413126552f, 0.3633438549928078f, 0.6627258684274799f),
            new(0.7759147937374719f, -0.06467098177660542f, 0.6275140611774259f),
            new(-0.8004695222879527f, -0.38797011376780055f, 0.45686730536458503f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(0.019617857784818074f, -0.9046346700309197f, 0.42573613122917264f),
            new(0.4535927242409206f, 0.2503746145149169f, 0.8553164285351982f),
            new(0.22561518429845503f, 0.7026301367672779f, 0.6748397435838902f),
            new(-0.15973498608847195f, -0.9627510673717828f, 0.2181630502486809f),
            new(-0.28352722557806725f, -0.43959927902513435f, 0.8522703715585717f),
            new(-0.08542240619800708f, -0.0006793649965217835f, 0.9963445944965749f),
            new(0.7809524972992861f, -0.4794252097680911f, 0.4003306948022229f),
            new(-0.7102694133552903f, 0.5307374555807358f, 0.4624230894923159f),
            new(0.8297338995173544f, 0.2700780912517352f, 0.4884664580271035f),
            new(-0.6743685040256558f, 0.0379747869606533f, 0.7374178166639942f),
            new(0.09593978339121306f, 0.9193556281533544f, 0.3815505037941873f),
            new(-0.10862320970648107f, 0.46455008442763895f, 0.878859611867183f),
            new(0.15111917264941604f, -0.6733345749784468f, 0.723728917341535f),
            new(0.26705759081418484f, -0.953328540536477f, 0.14087205892977558f),
            new(-0.9233760122601468f, 0.17502807141979942f, 0.34167515888284133f),
            new(0.9531566906653711f, 0.021164862461492556f, 0.30173559888886875f),
            new(-0.7042232372206394f, -0.6818348223953548f, 0.19791641449757988f)
        },
        new Vector3[] {
            new(1f, 0f, 0f),
            new(0.18825970474714468f, -0.8495208286146045f, 0.49282110884018915f),
            new(-0.6610398128393619f, 0.1412849866894996f, 0.7369293849328098f),
            new(0.008363831723724312f, -0.9811124668085629f, 0.19325727358035927f),
            new(0.2576337775542596f, 0.4399382338030687f, 0.860278552040767f),
            new(-0.003088605861163733f, 0.017666238095502364f, 0.9998391693394432f),
            new(-0.8599108039719765f, -0.12853672727658255f, 0.4939956669377722f),
            new(0.9794217555144464f, 0.058696792163417194f, 0.19310026259620786f),
            new(0.7817604473923191f, 0.02980628363009336f, 0.6228661078828447f),
            new(-0.2419246775850723f, 0.9186414809529806f, 0.31236241747027377f),
            new(0.07752083900811671f, 0.9736359894582644f, 0.2145308358980225f),
            new(0.7932717142859945f, 0.012227490039782803f, 0.6087450006374479f),
            new(-0.3768278334921549f, 0.352339908921949f, 0.8566547568807876f),
            new(0.13412818133942844f, -0.8656514986194374f, 0.48234543006905317f),
            new(0.840206628418549f, 0.3176893944515768f, 0.43946134097839024f),
            new(-0.2905326836965935f, -0.7049245409090609f, 0.6470488013497938f),
            new(-0.06134743235667161f, 0.7070719791926686f, 0.7044754848706986f),
            new(-0.05142169686834005f, -0.7949154465928517f, 0.6045372129648163f),
            new(-0.9132388936713386f, 0.13845927786035045f, 0.38317587536318065f)
        }
    };





}